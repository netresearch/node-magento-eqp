name: ðŸ”Ž Lint

on:
    workflow_dispatch:
    push:
        branches-ignore: [gh-pages]
    pull_request:
        branches-ignore: [gh-pages]
        types: [opened, synchronize]

permissions:
    contents: read

concurrency:
    group: ci-${{ github.ref }}
    cancel-in-progress: true

env:
    HUSKY: '0'

jobs:
    build:
        name: ðŸ”¨ Build
        runs-on: ubuntu-24.04
        steps:
            - uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6.0.2
            - uses: actions/setup-node@6044e13b5dc448c55e2357c09f80417699197238 # v6.2.0
              with:
                  node-version: 24
                  cache: yarn

            - name: âš¡ Install dependencies
              run: yarn install --frozen-lockfile

            - name: ðŸ”¨ Build
              run: yarn build:lib

    test:
        name: ðŸ§ª Test
        runs-on: ubuntu-24.04
        steps:
            - uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6.0.2
            - uses: actions/setup-node@6044e13b5dc448c55e2357c09f80417699197238 # v6.2.0
              with:
                  node-version: 24
                  cache: yarn

            - name: âš¡ Install dependencies
              run: yarn install --frozen-lockfile

            - name: ðŸ§ª Test
              run: yarn test:coverage

    lint:
        name: ðŸ”Ž Lint
        runs-on: ubuntu-24.04
        steps:
            - uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6.0.2
            - uses: actions/setup-node@6044e13b5dc448c55e2357c09f80417699197238 # v6.2.0
              with:
                  node-version: 24
                  cache: yarn

            - name: âš¡ Install dependencies
              run: yarn install --frozen-lockfile

            - name: ðŸ”Ž Lint
              run: yarn lint
